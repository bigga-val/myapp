{% extends 'components/layout/default.html.twig' %}
{% block content %}
    <link rel="stylesheet" href="{{ asset('assets/css/datatables.min.css') }}">

    <div class="panel">
        <div class="flex justify-between mb-3">

            <h1>Historique de Reception</h1>


            <a class="border border-2 p-2 m2 text-white rounded bg-primary" href="{{ path('app_commander') }}">Nouvelle Commande</a>

            {#        <a class="border border-2 p-2 m2 text-white rounded bg-primary" href="{{ path('app_produits_index') }}">Liste des produits</a>#}
        </div>
        <div>

            <table id="datatable" class="table display">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Commande</th>
                    <th>Produit</th>
                    <th>Quantite</th>
                    <th>Date</th>
                    <th>Par</th>
                </tr>
                </thead>
                <tbody id="myTable">
                {% set counter = 0 %}
                {% for line in listes %}
                    {% set counter = counter + 1 %}
                    <tr>
                        <td>{{ counter }}</td>
                        <td>{{ line.CommandeNumber }}</td>
                        <td>
                            {{ line.designation }}
                        </td>
                        <td>
                            {{ line.QuantiteRecue }}
                        </td>
                        <td>{{ line.ReceptionDate ? line.ReceptionDate|date('Y-m-d H:i:s') : '' }}</td>

                        <td>
                            {{ line.username }}
                        </td>

                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <script src="{{ asset('assets/js/jquery.min.js') }}"></script>
        <script src="{{ asset('assets/js/datatables.js') }}"></script>


        <script>
            let table = new DataTable('#datatable', {
                order: [[0, 'desc']],
                language: {
                    info: 'Page _PAGE_ / _PAGES_',
                    infoEmpty: 'No records available',
                    infoFiltered: '(filtered from _MAX_ total records)',
                    lengthMenu: 'Afficher _MENU_ ligne par page',
                    zeroRecords: 'Nothing found - sorry'
                },
                buttons: [
                    'copy', 'excel', 'pdf'
                ]
            });
        </script>
    </div>

{% endblock %}
