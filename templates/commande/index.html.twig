{% extends 'components/layout/default.html.twig' %}
{% block content %}
<link rel="stylesheet" href="{{ asset('assets/css/datatables.min.css') }}">

<div class="panel">
    <div class="flex justify-between mb-3">

        <h1>Liste des Commandes</h1>


        <a class="border border-2 p-2 m2 text-white rounded bg-primary" href="{{ path('app_commander') }}">Nouvelle Commande</a>

        {#        <a class="border border-2 p-2 m2 text-white rounded bg-primary" href="{{ path('app_produits_index') }}">Liste des produits</a>#}
    </div>
    <div>

    <table id="datatable" class="table display">
        <thead>
            <tr>
                <th>#</th>
                <th>No Commande</th>
                <th>Date</th>
                <th>Total</th>
                <th>Status</th>
                <th>Approuve Par</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody id="myTable">
        {% for commande in commandes %}
            <tr>
                <td>{{ commande.id }}</td>
                <td>{{ commande.CommandeNumber }}</td>
                <td>{{ commande.CommandeDate ? commande.CommandeDate|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ commande.Status }}</td>
                <td>{{ commande.IsApproved ? 'Yes' : 'No' }}</td>
                <td>
                    {% if commande.ApprovedBy is not null and commande.ApprovedBy.Username is not null %}
                        {{ commande.ApprovedBy.username }}
                    {% else %}
                        â€”
                    {% endif %}
                </td>
                <td class="flex justify-start">
                    <a class="btn btn-sm btn-primary" href="{{ path('app_commande_show', {'id': commande.id}) }}">Details</a>
                    <a class="btn btn-sm btn-primary mx-auto" href="{{ path('app_commande_reception_liste', {'commandeID': commande.id}) }}">Receptions</a>

                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

    <script src="{{ asset('assets/js/jquery.min.js') }}"></script>
    <script src="{{ asset('assets/js/datatables.js') }}"></script>


    <script>
        let table = new DataTable('#datatable', {
            order: [[0, 'desc']],
            language: {
                info: 'Page _PAGE_ / _PAGES_',
                infoEmpty: 'No records available',
                infoFiltered: '(filtered from _MAX_ total records)',
                lengthMenu: 'Afficher _MENU_ ligne par page',
                zeroRecords: 'Nothing found - sorry'
            },
            buttons: [
                'copy', 'excel', 'pdf'
            ]
        });
    </script>
</div>

{% endblock %}
